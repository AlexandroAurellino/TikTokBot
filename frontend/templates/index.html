<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AI Scene Changer - Dashboard</title>
    <link rel="preconnect" href="https://rsms.me/" />
    <link rel="stylesheet" href="https://rsms.me/inter/inter.css" />
    <link rel="stylesheet" href="/static/css/style.css" />
  </head>
  <body>
    <!-- ======================= -->
    <!-- == SIDEBAR NAVIGATION == -->
    <!-- ======================= -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <div class="sidebar-logo">
          <svg
            class="logo-icon"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
          >
            <path
              d="M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3"
            />
          </svg>
          <span class="logo-text">Scene Changer</span>
        </div>
      </div>

      <nav class="sidebar-nav">
        <a href="#" class="nav-item active" data-page="dashboard">
          <svg
            class="nav-icon"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
          >
            <rect width="7" height="9" x="3" y="3" rx="1" />
            <rect width="7" height="5" x="14" y="3" rx="1" />
            <rect width="7" height="9" x="14" y="12" rx="1" />
            <rect width="7" height="5" x="3" y="16" rx="1" />
          </svg>
          <span>Dashboard</span>
        </a>
        <a href="#" class="nav-item" data-page="products">
          <svg
            class="nav-icon"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
          >
            <path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z" />
            <path d="M3 6h18" />
            <path d="M16 10a4 4 0 0 1-8 0" />
          </svg>
          <span>Products</span>
        </a>
        <a href="#" class="nav-item" data-page="settings">
          <svg
            class="nav-icon"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
          >
            <path
              d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"
            />
            <circle cx="12" cy="12" r="3" />
          </svg>
          <span>Settings</span>
        </a>
        <a href="#" class="nav-item" data-page="logs">
          <svg
            class="nav-icon"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
          >
            <path
              d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"
            />
            <polyline points="14 2 14 8 20 8" />
            <line x1="16" y1="13" x2="8" y2="13" />
            <line x1="16" y1="17" x2="8" y2="17" />
            <line x1="10" y1="9" x2="8" y2="9" />
          </svg>
          <span>Logs</span>
        </a>
      </nav>
    </aside>

    <!-- ================== -->
    <!-- == MAIN CONTENT == -->
    <!-- ================== -->
    <main class="main-content">
      <!-- DASHBOARD PAGE -->
      <div id="dashboard" class="page active">
        <div class="page-header">
          <div>
            <h1 class="page-title">Dashboard</h1>
            <p class="page-description">
              An overview of your live stream automation.
            </p>
          </div>
          <div class="page-actions">
            <button id="startButton" class="btn btn-primary">
              <svg
                class="btn-icon"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
              >
                <polygon points="5 3 19 12 5 21 5 3" /></svg
              >Start Bot
            </button>
            <button id="stopButton" class="btn btn-destructive" disabled>
              <svg
                class="btn-icon"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
              >
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2" /></svg
              >Stop Bot
            </button>
          </div>
        </div>
        <div id="statsContainer" class="stats-grid">
          <!-- Stats will be inserted by JS -->
        </div>
        <div class="info-grid">
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">System Status</h3>
            </div>
            <div class="card-content">
              <div class="status-list">
                <div class="status-item">
                  <span class="status-item-label">Bot Status</span
                  ><span
                    class="status-badge status-badge-inactive"
                    id="bot-status-badge"
                    >Stopped</span
                  >
                </div>
                <div class="status-item">
                  <span class="status-item-label">TikTok Connection</span
                  ><span
                    class="status-badge status-badge-inactive"
                    id="tiktok-status-badge"
                    >Disconnected</span
                  >
                </div>
                <div class="status-item">
                  <span class="status-item-label">OBS Connection</span
                  ><span
                    class="status-badge status-badge-inactive"
                    id="obs-status-badge"
                    >Disconnected</span
                  >
                </div>
              </div>
            </div>
          </div>
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">Quick Start</h3>
            </div>
            <div class="card-content">
              <ol class="steps-list">
                <li>
                  Go to the <strong>Products</strong> page to add items and
                  scenes.
                </li>
                <li>
                  Go to the <strong>Settings</strong> page to enter your
                  credentials.
                </li>
                <li>Ensure the TikTok user is <strong>live</strong>.</li>
                <li>Return here and click <strong>Start Bot</strong>.</li>
              </ol>
            </div>
          </div>
        </div>
      </div>

      <!-- PRODUCTS PAGE -->
      <div id="products" class="page">
        <div class="page-header">
          <div>
            <h1 class="page-title">Product Management</h1>
            <p class="page-description">
              Add products, link them to OBS scenes, and provide keywords for
              the AI.
            </p>
          </div>
          <button id="addProductBtn" class="btn btn-primary">
            <svg
              class="btn-icon"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
            >
              <path d="M5 12h14" />
              <path d="M12 5v14" /></svg
            >Add Product
          </button>
        </div>
        <div class="card">
          <div class="card-content" id="productsContainer">
            <!-- Product items will be inserted here by JS -->
          </div>
          <div class="empty-state" id="productsEmptyState">
            <svg
              class="empty-icon"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
            >
              <path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z" />
              <path d="M3 6h18" />
              <path d="M16 10a4 4 0 0 1-8 0" />
            </svg>
            <h3>No Products Found</h3>
            <p>Add your first product to link it with an OBS scene.</p>
            <button
              class="btn btn-outline"
              onclick="document.getElementById('addProductBtn').click()"
            >
              Add Product
            </button>
          </div>
        </div>
      </div>

      <!-- SETTINGS PAGE -->
      <div id="settings" class="page">
        <div class="page-header">
          <div>
            <h1 class="page-title">Settings</h1>
            <p class="page-description">
              Configure connections, credentials, and application behavior.
            </p>
          </div>
        </div>
        <form id="settingsForm" class="settings-grid">
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">Core Credentials</h3>
            </div>
            <div class="card-content">
              <div class="form-group">
                <label class="form-label" for="tiktok_username"
                  >TikTok Username</label
                >
                <input
                  type="text"
                  id="tiktok_username"
                  class="form-input"
                  placeholder="@username"
                  required
                />
                <p class="form-hint">
                  The @ username of the account that will be live.
                </p>
              </div>
              <div class="form-group">
                <label class="form-label" for="deepseek_api_key"
                  >DeepSeek API Key</label
                >
                <input
                  type="password"
                  id="deepseek_api_key"
                  class="form-input"
                  placeholder="sk-••••••••••••••••••••"
                  required
                />
                <p class="form-hint">
                  Your secret key for the AI comment analysis.
                </p>
              </div>
            </div>
          </div>
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">OBS Studio Connection</h3>
            </div>
            <div class="card-content">
              <div class="form-group">
                <label class="form-label" for="main_scene_name"
                  >Main Scene Name</label
                >
                <input
                  type="text"
                  id="main_scene_name"
                  class="form-input"
                  placeholder="e.g., Main Camera"
                  required
                />
                <p class="form-hint">
                  The scene to return to after a product video finishes.
                </p>
              </div>
              <div class="form-row">
                <div class="form-group">
                  <label class="form-label" for="obs_ws_host">Host</label
                  ><input
                    type="text"
                    id="obs_ws_host"
                    class="form-input"
                    required
                  />
                </div>
                <div class="form-group">
                  <label class="form-label" for="obs_ws_port">Port</label
                  ><input
                    type="number"
                    id="obs_ws_port"
                    class="form-input"
                    required
                  />
                </div>
              </div>
              <div class="form-group">
                <label class="form-label" for="obs_ws_password">Password</label>
                <input
                  type="password"
                  id="obs_ws_password"
                  class="form-input"
                  placeholder="Leave empty if none"
                />
              </div>
            </div>
          </div>
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">Performance Tuning</h3>
            </div>
            <div class="card-content">
              <div class="form-row">
                <div class="form-group">
                  <label class="form-label" for="rate_limit"
                    >Rate Limit (req/min)</label
                  ><input
                    type="number"
                    id="rate_limit"
                    class="form-input"
                    required
                  />
                </div>
                <div class="form-group">
                  <label class="form-label" for="reconnect_delay"
                    >Reconnect (sec)</label
                  ><input
                    type="number"
                    id="reconnect_delay"
                    class="form-input"
                    required
                  />
                </div>
                <div class="form-group">
                  <label class="form-label" for="cache_duration"
                    >Cache (sec)</label
                  ><input
                    type="number"
                    id="cache_duration"
                    class="form-input"
                    required
                  />
                </div>
              </div>
            </div>
          </div>
          <div class="form-actions">
            <button type="submit" id="saveSettingsBtn" class="btn btn-primary">
              Save Settings
            </button>
          </div>
        </form>
      </div>

      <!-- LOGS PAGE -->
      <div id="logs" class="page">
        <div class="page-header">
          <div>
            <h1 class="page-title">Activity Logs</h1>
            <p class="page-description">
              A real-time feed of incoming comments and system actions.
            </p>
          </div>
        </div>
        <div class="logs-grid">
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">TikTok Live Chat</h3>
            </div>
            <div class="log-content" id="chatLogContent"></div>
          </div>
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">System Actions</h3>
            </div>
            <div class="log-content" id="actionLogContent"></div>
          </div>
        </div>
      </div>
    </main>

    <!-- ============ -->
    <!-- == MODALS == -->
    <!-- ============ -->
    <div id="modalContainer"></div>

    <!-- ================== -->
    <!-- == TEMPLATES == -->
    <!-- ================== -->
    <!-- PRODUCT ITEM TEMPLATE -->
    <template id="product-item-template">
      <div class="product-item">
        <div class="product-item-header">
          <div>
            <div class="product-item-name"></div>
            <div class="product-item-scene"></div>
          </div>
          <div class="product-item-actions">
            <button class="btn btn-icon-only btn-edit">
              <svg
                class="btn-icon"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
              >
                <path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z" />
              </svg>
            </button>
            <button class="btn btn-icon-only btn-destructive btn-delete">
              <svg
                class="btn-icon"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
              >
                <path d="M3 6h18" />
                <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6" />
                <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2" />
              </svg>
            </button>
          </div>
        </div>
        <div class="product-item-description"></div>
      </div>
    </template>

    <!-- PRODUCT MODAL TEMPLATE -->
    <template id="product-modal-template">
      <div class="modal-overlay">
        <div class="modal">
          <div class="modal-header"><h2 class="modal-title"></h2></div>
          <div class="modal-content">
            <div class="form-group">
              <label class="form-label" for="modal-product-name"
                >Product Name</label
              >
              <input
                type="text"
                id="modal-product-name"
                class="form-input"
                placeholder="e.g., Cosmic Glow Lamp"
                required
              />
              <p class="form-hint">The official name for your product.</p>
            </div>
            <div class="form-group">
              <label class="form-label" for="modal-product-scene"
                >OBS Scene Name</label
              >
              <input
                type="text"
                id="modal-product-scene"
                class="form-input"
                placeholder="e.g., Scene_Glow_Lamp"
                required
              />
              <p class="form-hint">Must match the scene name in OBS exactly.</p>
            </div>
            <div class="form-group">
              <label class="form-label" for="modal-product-description"
                >AI Keywords & Description</label
              >
              <textarea
                id="modal-product-description"
                class="form-textarea"
                placeholder="lamp, light, colorful lamp, LED..."
              ></textarea>
              <p class="form-hint">
                Help the AI identify this product. Add comma-separated keywords
                or simple descriptions viewers might use.
              </p>
            </div>
          </div>
          <div class="modal-footer">
            <button class="btn btn-outline" id="modal-cancel">Cancel</button>
            <button class="btn btn-primary" id="modal-save">
              Save Product
            </button>
          </div>
        </div>
      </div>
    </template>

    <!-- TOAST NOTIFICATION CONTAINER -->
    <div id="toastContainer" class="toast-container"></div>

    <script src="/static/js/script.js"></script>
  </body>
</html>
