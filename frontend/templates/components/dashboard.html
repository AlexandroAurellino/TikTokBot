<div id="dashboard" class="page active">
  <div class="page-header">
    <div>
      <h1 style="font-size: 1.875rem; font-weight: 700">Dashboard</h1>
      <p class="text-muted">Manage your live stream automation.</p>
    </div>
  </div>

  <div class="dashboard-grid">
    <!-- LEFT COLUMN: CONTROLS & STATS -->
    <div class="dashboard-left">
      <!-- Top Stats Row -->
      <div class="stats-row">
        <div class="stat-card">
          <div class="stat-label">Comments</div>
          <div class="stat-value" id="stat-comments">0</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Switches</div>
          <div class="stat-value" id="stat-switches">0</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Errors</div>
          <div class="stat-value" id="stat-errors">0</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Status</div>
          <div
            class="stat-value"
            id="bot-status-text"
            style="
              font-size: 1rem;
              margin-top: 0.5rem;
              color: var(--muted-foreground);
            "
          >
            Stopped
          </div>
        </div>
      </div>

      <!-- Controls Card -->
      <div class="card">
        <div class="card-header">
          <h3 class="card-title">System Controls</h3>
        </div>
        <div class="card-content" style="display: flex; gap: 1rem">
          <button id="startButton" class="btn btn-primary" style="flex: 1">
            <svg
              class="btn-icon"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
            >
              <polygon points="5 3 19 12 5 21 5 3"></polygon>
            </svg>
            Start Bot
          </button>
          <button
            id="stopButton"
            class="btn btn-destructive"
            style="flex: 1"
            disabled
          >
            <svg
              class="btn-icon"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
            >
              <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
            </svg>
            Stop Bot
          </button>
        </div>
      </div>

      <!-- Now Playing & Queue -->
      <div class="card" style="flex: 1">
        <div
          class="card-header"
          style="
            flex-direction: row;
            align-items: center;
            justify-content: space-between;
          "
        >
          <h3 class="card-title">Broadcast Queue</h3>
          <button
            id="skipButton"
            class="btn btn-outline"
            style="height: 2rem; font-size: 0.75rem"
          >
            Skip Video
          </button>
        </div>
        <div class="card-content">
          <!-- Now Playing -->
          <div style="margin-bottom: 1.5rem">
            <div
              class="text-xs text-muted"
              style="
                margin-bottom: 0.5rem;
                font-weight: 600;
                text-transform: uppercase;
              "
            >
              Now Playing
            </div>
            <div
              id="currentProductDisplay"
              style="
                padding: 1rem;
                border: 1px solid var(--primary);
                background-color: hsla(221.2, 83.2%, 53.3%, 0.1);
                border-radius: var(--radius);
                color: var(--primary);
                font-weight: 600;
                display: flex;
                align-items: center;
                gap: 0.5rem;
              "
            >
              <span
                style="
                  width: 8px;
                  height: 8px;
                  background: var(--primary);
                  border-radius: 50%;
                  display: inline-block;
                  animation: pulse 2s infinite;
                "
              ></span>
              <span id="now-playing-text">Idle - Waiting for requests...</span>
            </div>
          </div>

          <!-- Queue List -->
          <div>
            <div
              class="text-xs text-muted"
              style="
                margin-bottom: 0.5rem;
                font-weight: 600;
                text-transform: uppercase;
              "
            >
              Up Next
            </div>
            <div id="queueList">
              <div
                class="text-muted text-sm"
                style="font-style: italic; padding: 0.5rem 0"
              >
                Queue is empty
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- RIGHT COLUMN: UNIFIED TABS (CHAT & LOGS) -->
    <div class="dashboard-right">
      <div class="tabs">
        <div class="tabs-list">
          <div
            class="tab-trigger"
            data-state="active"
            onclick="switchTab('chat')"
          >
            Live Chat
          </div>
          <div
            class="tab-trigger"
            data-state="inactive"
            onclick="switchTab('logs')"
          >
            System Logs
          </div>
        </div>

        <!-- Chat Content -->
        <div id="tab-chat" class="tab-content" data-state="active">
          <div id="chatLogContent" class="log-scroll-area"></div>
        </div>

        <!-- Logs Content -->
        <div id="tab-logs" class="tab-content" data-state="inactive">
          <div id="actionLogContent" class="log-scroll-area"></div>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  @keyframes pulse {
    0% {
      opacity: 1;
    }
    50% {
      opacity: 0.5;
    }
    100% {
      opacity: 1;
    }
  }
</style>

<script>
  // Simple Tab Switcher Logic embedded for speed
  function switchTab(tabName) {
    // Reset triggers
    document
      .querySelectorAll(".tab-trigger")
      .forEach((el) => el.setAttribute("data-state", "inactive"));
    // Reset contents
    document
      .querySelectorAll(".tab-content")
      .forEach((el) => el.setAttribute("data-state", "inactive"));

    // Activate selected
    const trigger = document.querySelector(
      `.tab-trigger[onclick="switchTab('${tabName}')"]`
    );
    const content = document.getElementById(`tab-${tabName}`);

    if (trigger && content) {
      trigger.setAttribute("data-state", "active");
      content.setAttribute("data-state", "active");
    }
  }
</script>
