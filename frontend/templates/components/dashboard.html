<div id="dashboard" class="page active">
  <div class="page-header">
    <div>
      <h1 class="page-title">Dashboard</h1>
      <p class="page-description">Manage your live stream automation.</p>
    </div>
  </div>

  <div class="dashboard-grid">
    <!-- LEFT COLUMN: CONTROLS & STATS -->
    <div class="dashboard-left">
      <!-- Top Stats Row -->
      <div class="stats-row">
        <div class="stat-card">
          <div class="stat-label">Comments Processed</div>
          <div class="stat-value" id="stat-comments">0</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Scene Switches</div>
          <div class="stat-value" id="stat-switches">0</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Errors</div>
          <div class="stat-value" id="stat-errors">0</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Bot Status</div>
          <div
            class="stat-value"
            id="bot-status-text"
            style="font-size: 1.25rem; margin-top: 0.5rem"
          >
            Stopped
          </div>
        </div>
      </div>

      <!-- Controls Card -->
      <div class="card">
        <div class="card-header">
          <h3 class="card-title">System Controls</h3>
        </div>
        <div class="card-content">
          <div style="display: flex; gap: 0.75rem">
            <button id="startButton" class="btn btn-primary" style="flex: 1">
              <svg
                class="btn-icon"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <polygon points="5 3 19 12 5 21 5 3"></polygon>
              </svg>
              Start Bot
            </button>
            <button
              id="stopButton"
              class="btn btn-destructive"
              style="flex: 1"
              disabled
            >
              <svg
                class="btn-icon"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
              </svg>
              Stop Bot
            </button>
          </div>
        </div>
      </div>

      <!-- Now Playing & Queue -->
      <div class="card" style="flex: 1; min-height: 0">
        <div class="card-header">
          <h3 class="card-title">Broadcast Queue</h3>
          <button
            id="skipButton"
            class="btn btn-outline"
            style="height: 2rem; padding: 0 0.75rem; font-size: 0.75rem"
          >
            <svg
              style="width: 14px; height: 14px; margin-right: 0.375rem"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <polygon points="5 4 15 12 5 20 5 4"></polygon>
              <line x1="19" y1="5" x2="19" y2="19"></line>
            </svg>
            Skip
          </button>
        </div>
        <div class="card-content">
          <!-- Now Playing -->
          <div style="margin-bottom: 1.5rem">
            <div class="badge badge-primary" style="margin-bottom: 0.75rem">
              NOW PLAYING
            </div>
            <div id="currentProductDisplay" class="now-playing-badge">
              <span class="pulse-dot"></span>
              <span id="now-playing-text">Idle - Waiting for requests...</span>
            </div>
          </div>

          <!-- Queue List -->
          <div>
            <div class="badge" style="margin-bottom: 0.75rem">UP NEXT</div>
            <div id="queueList">
              <div
                class="text-muted text-sm"
                style="font-style: italic; padding: 1rem 0; text-align: center"
              >
                Queue is empty
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- RIGHT COLUMN: UNIFIED TABS (CHAT & LOGS) -->
    <div class="dashboard-right">
      <div class="tabs">
        <div class="tabs-list">
          <button
            class="tab-trigger"
            data-state="active"
            onclick="switchTab('chat')"
          >
            <svg
              style="
                width: 16px;
                height: 16px;
                margin-right: 0.5rem;
                display: inline-block;
              "
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"
              ></path>
            </svg>
            Live Chat
          </button>
          <button
            class="tab-trigger"
            data-state="inactive"
            onclick="switchTab('logs')"
          >
            <svg
              style="
                width: 16px;
                height: 16px;
                margin-right: 0.5rem;
                display: inline-block;
              "
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"
              ></path>
              <polyline points="14 2 14 8 20 8"></polyline>
              <line x1="16" y1="13" x2="8" y2="13"></line>
              <line x1="16" y1="17" x2="8" y2="17"></line>
              <polyline points="10 9 9 9 8 9"></polyline>
            </svg>
            System Logs
          </button>
        </div>

        <!-- Chat Content -->
        <div id="tab-chat" class="tab-content" data-state="active">
          <div id="chatLogContent" class="log-scroll-area"></div>
        </div>

        <!-- Logs Content -->
        <div id="tab-logs" class="tab-content" data-state="inactive">
          <div id="actionLogContent" class="log-scroll-area"></div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  // Tab Switcher
  function switchTab(tabName) {
    document
      .querySelectorAll(".tab-trigger")
      .forEach((el) => el.setAttribute("data-state", "inactive"));
    document
      .querySelectorAll(".tab-content")
      .forEach((el) => el.setAttribute("data-state", "inactive"));

    const trigger = document.querySelector(
      `.tab-trigger[onclick*="'${tabName}'"]`
    );
    const content = document.getElementById(`tab-${tabName}`);

    if (trigger && content) {
      trigger.setAttribute("data-state", "active");
      content.setAttribute("data-state", "active");
    }
  }
</script>
